<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="utf-8">
    <title></title>
    <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
</head>
<script src="js/jquery-1.9.0.js" type="text/javascript"></script>
<script src="js/knockout-2.2.1.debug.js" type="text/javascript"></script>
<body>
<div class="well">
    Hello world
    <button data-bind="click: connectWS">
        test WS
    </button>
</div>

</body>

<script type="text/javascript">
    var viewModel = {
        numberOfClicks : ko.observable(0),
        connectWS : function() {
            var previousCount = this.numberOfClicks();
            this.numberOfClicks(previousCount + 1);
            console.log("will connect to websocket");

            var ws = new WebSocket("ws://localhost:8080/");
            ws.onopen = function()
            {
                // Web Socket is connected, send data using send()
                ws.send("uber important dem2cz Message");
                console.log("Message is sent...");
            };
            ws.onmessage = function (evt)
            {
                var received_msg = evt.data;
                console.log("Message is received: " + received_msg);
            };
            ws.onclose = function()
            {
                // websocket is closed.
                console.log("Connection is closed...");
            };
        }
    };

    ko.applyBindings(viewModel);
</script>
</html>